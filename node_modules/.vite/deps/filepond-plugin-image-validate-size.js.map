{
  "version": 3,
  "sources": ["../../filepond-plugin-image-validate-size/dist/filepond-plugin-image-validate-size.esm.js"],
  "sourcesContent": ["/*!\n * FilePondPluginImageValidateSize 1.2.7\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n// test if file is of type image\nconst isImage = file => /^image/.test(file.type);\n\nconst getImageSize = file =>\n  new Promise((resolve, reject) => {\n    const image = document.createElement('img');\n    image.src = URL.createObjectURL(file);\n    image.onerror = err => {\n      clearInterval(intervalId);\n      reject(err);\n    };\n    const intervalId = setInterval(() => {\n      if (image.naturalWidth && image.naturalHeight) {\n        clearInterval(intervalId);\n        URL.revokeObjectURL(image.src);\n        resolve({\n          width: image.naturalWidth,\n          height: image.naturalHeight\n        });\n      }\n    }, 1);\n  });\n\nconst plugin = ({ addFilter, utils }) => {\n  // get quick reference to Type utils\n  const { Type, replaceInString, isFile } = utils;\n\n  // required file size\n  const validateFile = (file, bounds, measure) =>\n    new Promise((resolve, reject) => {\n      const onReceiveSize = ({ width, height }) => {\n        const {\n          minWidth,\n          minHeight,\n          maxWidth,\n          maxHeight,\n          minResolution,\n          maxResolution\n        } = bounds;\n\n        const resolution = width * height;\n\n        // validation result\n        if (width < minWidth || height < minHeight) {\n          reject('TOO_SMALL');\n        } else if (width > maxWidth || height > maxHeight) {\n          reject('TOO_BIG');\n        } else if (minResolution !== null && resolution < minResolution) {\n          reject('TOO_LOW_RES');\n        } else if (maxResolution !== null && resolution > maxResolution) {\n          reject('TOO_HIGH_RES');\n        }\n\n        // all is well\n        resolve();\n      };\n\n      getImageSize(file)\n        .then(onReceiveSize)\n        .catch(() => {\n          // no custom measure method supplied, exit here\n          if (!measure) {\n            reject();\n            return;\n          }\n\n          // try fallback if defined by user, else reject\n          measure(file, bounds)\n            .then(onReceiveSize)\n            .catch(() => reject());\n        });\n    });\n\n  // called for each file that is loaded\n  // right before it is set to the item state\n  // should return a promise\n  addFilter(\n    'LOAD_FILE',\n    (file, { query }) =>\n      new Promise((resolve, reject) => {\n        if (\n          !isFile(file) ||\n          !isImage(file) ||\n          !query('GET_ALLOW_IMAGE_VALIDATE_SIZE')\n        ) {\n          resolve(file);\n          return;\n        }\n\n        // get required dimensions\n        const bounds = {\n          minWidth: query('GET_IMAGE_VALIDATE_SIZE_MIN_WIDTH'),\n          minHeight: query('GET_IMAGE_VALIDATE_SIZE_MIN_HEIGHT'),\n          maxWidth: query('GET_IMAGE_VALIDATE_SIZE_MAX_WIDTH'),\n          maxHeight: query('GET_IMAGE_VALIDATE_SIZE_MAX_HEIGHT'),\n          minResolution: query('GET_IMAGE_VALIDATE_SIZE_MIN_RESOLUTION'),\n          maxResolution: query('GET_IMAGE_VALIDATE_SIZE_MAX_RESOLUTION')\n        };\n\n        // get optional custom measure function\n        const measure = query('GET_IMAGE_VALIDATE_SIZE_MEASURE');\n\n        validateFile(file, bounds, measure)\n          .then(() => {\n            resolve(file);\n          })\n          .catch(error => {\n            const status = error\n              ? {\n                  TOO_SMALL: {\n                    label: query(\n                      'GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_SIZE_TOO_SMALL'\n                    ),\n                    details: query(\n                      'GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MIN_SIZE'\n                    )\n                  },\n                  TOO_BIG: {\n                    label: query(\n                      'GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_SIZE_TOO_BIG'\n                    ),\n                    details: query(\n                      'GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MAX_SIZE'\n                    )\n                  },\n                  TOO_LOW_RES: {\n                    label: query(\n                      'GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_RESOLUTION_TOO_LOW'\n                    ),\n                    details: query(\n                      'GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MIN_RESOLUTION'\n                    )\n                  },\n                  TOO_HIGH_RES: {\n                    label: query(\n                      'GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_RESOLUTION_TOO_HIGH'\n                    ),\n                    details: query(\n                      'GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MAX_RESOLUTION'\n                    )\n                  }\n                }[error]\n              : {\n                  label: query('GET_IMAGE_VALIDATE_SIZE_LABEL_FORMAT_ERROR'),\n                  details: file.type\n                };\n\n            reject({\n              status: {\n                main: status.label,\n                sub: error\n                  ? replaceInString(status.details, bounds)\n                  : status.details\n              }\n            });\n          });\n      })\n  );\n\n  // expose plugin\n  return {\n    // default options\n    options: {\n      // Enable or disable file type validation\n      allowImageValidateSize: [true, Type.BOOLEAN],\n\n      // Error thrown when image can not be loaded\n      imageValidateSizeLabelFormatError: [\n        'Image type not supported',\n        Type.STRING\n      ],\n\n      // Custom function to use as image measure\n      imageValidateSizeMeasure: [null, Type.FUNCTION],\n\n      // Required amount of pixels in the image\n      imageValidateSizeMinResolution: [null, Type.INT],\n      imageValidateSizeMaxResolution: [null, Type.INT],\n      imageValidateSizeLabelImageResolutionTooLow: [\n        'Resolution is too low',\n        Type.STRING\n      ],\n      imageValidateSizeLabelImageResolutionTooHigh: [\n        'Resolution is too high',\n        Type.STRING\n      ],\n      imageValidateSizeLabelExpectedMinResolution: [\n        'Minimum resolution is {minResolution}',\n        Type.STRING\n      ],\n      imageValidateSizeLabelExpectedMaxResolution: [\n        'Maximum resolution is {maxResolution}',\n        Type.STRING\n      ],\n\n      // Required dimensions\n      imageValidateSizeMinWidth: [1, Type.INT], // needs to be at least one pixel\n      imageValidateSizeMinHeight: [1, Type.INT],\n      imageValidateSizeMaxWidth: [65535, Type.INT], // maximum size of JPEG, fine for now I guess\n      imageValidateSizeMaxHeight: [65535, Type.INT],\n\n      // Label to show when an image is too small or image is too big\n      imageValidateSizeLabelImageSizeTooSmall: [\n        'Image is too small',\n        Type.STRING\n      ],\n      imageValidateSizeLabelImageSizeTooBig: ['Image is too big', Type.STRING],\n      imageValidateSizeLabelExpectedMinSize: [\n        'Minimum size is {minWidth} × {minHeight}',\n        Type.STRING\n      ],\n      imageValidateSizeLabelExpectedMaxSize: [\n        'Maximum size is {maxWidth} × {maxHeight}',\n        Type.STRING\n      ]\n    }\n  };\n};\n\n// fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\nconst isBrowser =\n  typeof window !== 'undefined' && typeof window.document !== 'undefined';\nif (isBrowser) {\n  document.dispatchEvent(\n    new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n  );\n}\n\nexport default plugin;\n"],
  "mappings": "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",
  "names": []
}
